[nightly]
builders: 'example-worker'
repos: [{'poky':
            {'repourl':'git://git.yoctoproject.org/poky',
             'layerversion':{'core':'meta', 'yoctobsp':'meta-yocto-bsp', 'yocto':'meta-yocto', 'poky':'meta-poky'},
             'branch':'master'}},
        {'meta-intel':
            {'repourl':'git://git.yoctoproject.org/meta-intel',
             'branch':'master'}},
        {'meta-minnow':
            {'repourl':'git://git.yoctoproject.org/meta-minnow',
             'branch':'master'}},
        {'meta-fsl-ppc':
            {'repourl':'git://git.yoctoproject.org/meta-fsl-ppc',
             'branch':'master'}},
        {'meta-fsl-arm':
            {'repourl':'git://git.yoctoproject.org/meta-fsl-arm',
             'branch':'master'}},
        {'oecore':
            {'repourl':'git://git.openembedded.org/openembedded-core',
             'layerversion':'core',
             'checkout':False,
             'branch':'master'}},
        {'bitbake':
            {'repourl':'git://git.openembedded.org/bitbake',
             'checkout':False,
             'branch':'master'}},
        {'eclipse-poky-luna':
            {'repourl':'git://git.yoctoproject.org/eclipse-poky',
             'checkout':False,
             'branch':'luna-master'}},
        {'eclipse-poky-kepler':
            {'repourl':'git://git.yoctoproject.org/eclipse-poky',
             'checkout':False,
             'branch':'kepler-master'}},
        {'eclipse-poky-mars':
            {'repourl':'git://git.yoctoproject.org/eclipse-poky',
             'checkout':False,
             'branch':'mars-master'}},
        {'meta-qt4':
            {'repourl':'git://git.yoctoproject.org/meta-qt4',
             'branch':'master'}},
        {'meta-qt3':
            {'repourl':'git://git.yoctoproject.org/meta-qt3',
             'branch':'master'}}]
props: [{'release_me':{'prop_type':'ChoiceStringParameter',
                       'choices': ['False', 'True'],
                       'name': 'release_me',
                       'label':'<h3> Generate a release?:</h3>'}},
        {'poky_name':{'prop_type':'ChoiceStringParameter',
                       'choices': ['', 'jethro', 'fido','dizzy','daisy','dora','dylan','danny','denzil','edison','bernard'],
                       'name': 'poky_name',
                       'label':'<h3> Name of the poky release.<br>For further info on release names see <a href="https://wiki.yoctoproject.org/wiki/Releases"> Releases </a> </h3>'}},
        {'is_milestone':{'prop_type':'ChoiceStringParameter',
                       'choices': ['False', 'True'],
                       'name': 'is_milestone',
                       'label':'<h3> If this a milestone release? If so the poky number and poky name will be appended with a "+snapshot"</h3>'}},
        {'poky_number':{'prop_type':'StringParameter',
                       'size': 10,
                       'name': 'poky_number',
                       'label':'<h3> Poky Release Number (10.0.0, 11.0.1 etc.):</h3>'}},
        {'yocto_number':{'prop_type':'StringParameter',
                       'size': 10,
                       'name': 'yocto_number',
                       'label':'<h3> Yocto Project Release Number (1.5, 1.6 etc.):</h3>'}},
        {'milestone_number':{'prop_type':'ChoiceStringParameter',
                       'choices': ['', 'M1', 'M2', 'M3', 'M4'],
                       'name': 'milestone_number',
                       'label':'<h3> Milestone number: </h3>'}},
        {'rc_number':{'prop_type':'ChoiceStringParameter',
                       'choices': ['', 'rc1', 'rc2', 'rc3', 'rc4', 'rc5', 'rc6', 'rc7', 'rc8', 'rc9'],
                       'name': 'rc_number',
                       'label':'<h3> Release candidate number: </h3>'}},
        {'send_email':{'prop_type':'ChoiceStringParameter',
                       'choices': ['False', 'True'],
                       'name': 'send_email',
                       'label':'<h3> Send QA alert emails?:</h3>'}},
        {'prefered_kernel':{'prop_type':'StringParameter',
                       'size': 15,
                       'name': 'prefered_kernel',
                       'default': 'linux-yocto',
                       'label':'<hr><h3> PREFERRED_PROVIDER_virtual/kernel (default is "linux-yocto"):</h3>'}},
        {'deploy_artifacts':{'prop_type':'ChoiceStringParameter',
                       'choices': ['True', 'False'],
                       'name': 'deploy_artifacts',
                       'label':'<hr><h3> Do we want to deploy artifacts? </br>This speeds up autobuilder time and saves space on the cluster:</h3>'}}]
steps: [{'SetDest':{}},
        {'CheckOutLayers': {}},
        {'RunPreamble': {}},
        {'GetDistroVersion' : {'distro': 'poky'}},
        {'CreateAutoConf': {'machine': 'qemux86', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky',
                            'atextprepend': 'SOURCE_MIRROR_FETCH = "1"\n'}},
        {'CreateBBLayersConf': {'buildprovider' : 'yocto'}},
        {'BuildImages': {'images': 'universe -c fetch'}},
        {'TriggerBuilds': {'schedulerName': 'main-build', 'waitForFinish': 'True',
                           'schedulerNames': {'nightly-arm': {}, 'nightly-arm-lsb': {},
                           'nightly-fsl-arm': {}, 'nightly-fsl-arm-lsb': {},
                           'nightly-fsl-ppc': {}, 'nightly-fsl-ppc-lsb': {},
                           'nightly-mips': {}, 'nightly-mips-lsb': {},
                           'nightly-multilib': {}, 'nightly-x32': {},
                           'nightly-ppc': {}, 'nightly-ppc-lsb': {},
                           'nightly-x86-64': {}, 'nightly-x86-64-lsb': {},
                           'nightly-x86': {}, 'nightly-x86-lsb': {},
                           'nightly-rpm': {}, 'nightly-deb': {}, 'nightly-ipk': {},
                           'nightly-mips64': {}, 'nightly-arm64': {},
                           'nightly-rpm-non-rpm': {}, 'nightly-deb-non-deb': {}},
                           'schedulerNames_nowait' : {'nightly-uclibc':{}, 'build-appliance': {},
                           'eclipse-plugin-kepler': {}, 'eclipse-plugin-mars': {},
                           'eclipse-plugin-luna': {}, 'nightly-non-gpl3': {}, 
                           'nightly-oecore': {}, 'nightly-world':{},'nightly-wic':{}, 
                           'nightly-world-lsb':{}, 'nightly-intel-gpl': {},
                           'poky-tiny': {}, 'buildtools': {}, 'nightly-checkuri':{},
                           'nightly-qa-systemd': {}, 'nightly-qa-extras': {},
                           'nightly-qa-logrotate': {}, 'nightly-qa-pam': {},
                           'nightly-qa-skeleton': {}, 'nightly-oe-selftest': {}}}},
        {'PrepPkgIndex' : {}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'atom-pc', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'qemuarm', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'qemuarm64', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'beagleboard', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'qemumips', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'qemumips64', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'routerstationpro', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'qemuppc', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'mpc8315e-rdb', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateBBLayersConf': {'buildprovider' : 'yocto', 'bsplayer' : True, 'bspprovider' : 'fsl-ppc'}},
        {'CreateAutoConf': {'machine': 'p1022ds', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateBBLayersConf': {'buildprovider' : 'yocto', 'bsplayer' : True, 'bspprovider' : 'fsl-arm'}},
        {'CreateAutoConf': {'machine': 'imx53qsb', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateBBLayersConf': {'buildprovider' : 'yocto'}},
        {'CreateAutoConf': {'machine': 'qemux86-64', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'qemux86', 'SDKMACHINE' : 'i686',
                            'distro': 'poky', 'adtdev':True}},
        {'BuildImages': {'images': 'package-index'}},
        {'CreateAutoConf': {'machine': 'qemux86-64', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky'}},
        {'BuildImages': {'images': 'adt-installer'}},
        {'PublishArtifacts': {'artifacts': ['adt-installer']}},
        {'CreateAutoConf': {'machine': 'qemux86-64', 'SDKMACHINE' : 'x86_64',
                            'distro': 'poky', 'adtdev':True}},
        {'BuildImages': {'images': 'adt-installer'}},
        {'PublishArtifacts': {'artifacts': ['adt-installer-QA', 'adtrepo-dev']}},
        {'BitbakeSelftest': {}},
        {'SendErrorReport': {}},
        {'TriggerBuilds': {'schedulerName': 'buildhistory',
                           'waitForFinish': 'False',
                           'schedulerNames': {},
                           'schedulerNames_nowait' : {'update-buildhistory': {}}}},
        {'SendQAEmail': {}},
        {'CreateCurrentLink' : {}}]
