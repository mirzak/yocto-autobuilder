{% macro category_title() -%}
 {% if categories %}
  <br>
  {% trans categories=categories %}
   <b>Category:</b></br>
  {% pluralize categories %}
   <b>Categories:</b><br/>
  {% endtrans %}
  {% for c in categories %}
    {{ c|e }}<br/>
  {% endfor %}
 {% endif %}

 {% if branch != ANYBRANCH %}
  <br><b>Branch:</b> {{ branch|e or "trunk" }}
 {% endif %}
{%- endmacro %}


{% macro stamp_td(sourcestamps) -%}
  <td valign="bottom" class="sourcestamp">    
    {% for ss in sourcestamps %}
      {%- if ss.codebase %}{{ ss.codebase|e }}: {% endif %}
      {%- if ss.revision -%}
      <br/><b>Commit: </b>{{ ss.revision|shortrev(ss.repository) }}
      {%- else %}<br/><b>Commit: </b>latest{% endif %}
      {%- if ss.branch %} in {{ ss.branch|e }}{% endif %}
      {%- if ss.hasPatch %} [patch]{% endif -%}
      (<a href="http://errors.yoctoproject.org/Errors/Latest/Autobuilder/?filter={{ss.revision}}&type=commit">errors</a>)
    <br/>
    {%- endfor %}
  </td>
{%- endmacro %}

{% macro builder_td(b) -%}
  <td valign="middle" style="text-align: center" class="builder {{ b.state }}">
    <a href="{{ b.url }}">{{ b.name }}</a>
    {%- if b.state != 'idle' or b.n_pending > 0 -%}
      <br/>({{ b.state }}
      {%- if b.n_pending > 0 -%}
        , plus {{ b.n_pending }}
      {%- endif -%}      
      )
    {%- endif -%}
    {%- if b.time %}<br/><b>Time: </b> {{ b.time }} {% endif %}
  </td>
{%- endmacro %}

{% macro build_td(build) -%}
{% if build %}
  <td valign="top" class="build {{ build.class }}" style="text-align: left" style="white-space: nowrap" valign="bottom" >
    {%- if build.release_name %}<br/><b>RELEASE NAME:</b> {{ build.release_name }}{% endif %}
    {%- if build.branchshortname %}<br/><b>Branch:</b> {{ build.branchshortname }} {% endif %}
    {%- if build.repository %}<br/><b>Repo: </b>
    {%- if build.cgiturl %} <a href="{{ build.cgiturl }}"> {% endif %} 
    {{ build.repository }} 
    {%- if build.cgiturl %} </a> {% endif %} 
    {% endif %}
    <br/><b>Build:</b> <a href="{{ build.url }}">{{ build.text|join('<br/>') }}</a>
  </td>
{% else %}
  <td class="build">&nbsp;</td>
{% endif %}
{%- endmacro %}

